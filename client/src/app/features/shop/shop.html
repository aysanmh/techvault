@if (devices){
  <div class="flex flex-col gap-8 p-4">

    <div class="flex flex-col md:flex-row justify-between items-center gap-6">

      <div class="flex flex-wrap items-center gap-4 w-full md:w-auto">
        <mat-paginator
          (page)="handlePageEvent($event)"
          [length]="devices.count"
          [pageSize]="shopParams.pageSize"
          [showFirstLastButtons]="true"
          [pageSizeOptions]="pageSizeOptions"
          [pageIndex]="shopParams.pageNumber - 1"
        ></mat-paginator>
      </div>

      <form #searchForm="ngForm" (ngSubmit)="onSearchChange()" class="flex items-center w-full max-w-md gap-2">
        <input type="search" placeholder="Search" name="search" [(ngModel)]="shopParams.search" class="w-full px-3 py-2 rounded-md bg-[#1A1E2E] text-[#E0E0E0] border border-[#333] focus:outline-none focus:ring-2 focus:ring-cyan-400" />
        <button mat-icon-button type="submit" class="text-cyan-400 hover:text-cyan-300">
          <mat-icon>search</mat-icon>
        </button>
      </form>

      <div class="flex gap-3 flex-wrap">
        <button class="match-input-height flex items-center gap-1 px-3 py-2 bg-[#2A2A3F] text-[#E0E0E0] rounded-md hover:bg-[#1F2233]" (click)="openFiltersDialog()">
          <mat-icon class="text-cyan-400">filter_list</mat-icon> Filters
        </button>
        <button class="match-input-height flex items-center gap-1 px-3 py-2 bg-[#2A2A3F] text-[#E0E0E0] rounded-md hover:bg-[#1F2233]" mat-stroked-button [matMenuTriggerFor]="sortMenu">
          <mat-icon class="text-cyan-400">swap_vert</mat-icon> Sort
        </button>
      </div>
    </div>

    <div class="flex justify-center mt-6">
      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6 w-full max-w-screen-2xl">
        <app-device-item *ngFor="let device of devices.data" [device]="device" class="h-full"></app-device-item>
      </div>
    </div>
  </div>

  <mat-menu #sortMenu="matMenu">
    <mat-selection-list [multiple]="false" (selectionChange)="onSortChange($event)">
      <mat-list-option *ngFor="let sort of sortOptions" [value]="sort.value" [selected]="shopParams.sort === sort.value">
        {{sort.name}}
      </mat-list-option>
    </mat-selection-list>
  </mat-menu>

}