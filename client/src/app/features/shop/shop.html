<div *ngIf="devices()" class="device-container">
  <div class="flex flex-col md:flex-row justify-between items-center gap-[var(--spacing-lg)]">
    <div class="flex flex-wrap items-center gap-4 w-full md:w-auto">
      <mat-paginator
        (page)="handlePageEvent($event)"
        [length]="devices()?.count"
        [pageSize]="shopParams.pageSize"
        [showFirstLastButtons]="true"
        [pageSizeOptions]="pageSizeOptions"
        [pageIndex]="shopParams.pageNumber - 1"
      ></mat-paginator>
    </div>

    <form (ngSubmit)="onSearchChange()" class="flex items-center w-full max-w-md gap-2">
      <input
        type="search"
        placeholder="Search"
        [(ngModel)]="shopParams.search"
        name="search"
        class="search-input"
      />
      <button mat-icon-button type="submit" class="search-button">
        <mat-icon>search</mat-icon>
      </button>
    </form>

    <div class="flex gap-3 flex-wrap">
      <button (click)="openFiltersDialog()" class="filter-button">
        <mat-icon>filter_list</mat-icon>
        Filters
      </button>
      <button mat-stroked-button [matMenuTriggerFor]="sortMenu" class="sort-button">
        <mat-icon>swap_vert</mat-icon>
        Sort
      </button>
    </div>
  </div>

  <div class="device-grid-wrapper">
    <div class="device-grid">
      <app-device-item *ngFor="let device of devices()?.data" [device]="device"></app-device-item>
    </div>
  </div>

  <mat-menu #sortMenu="matMenu">
    <mat-selection-list [multiple]="false" (selectionChange)="onSortChange($event)">
      <mat-list-option
        *ngFor="let sort of sortOptions"
        [value]="sort.value"
        [selected]="shopParams.sort === sort.value"
      >
        {{ sort.name }}
      </mat-list-option>
    </mat-selection-list>
  </mat-menu>
</div>
